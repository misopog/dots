#!/bin/sh
#
# http://github.com/mitchweaver/bin
#
# use mpv as an image viewer
#

[ "$1" = -- ] && shift

launch() {
    exec mpv \
        --no-config \
        --no-keepaspect \
        --loop \
        --no-osc \
        --osd-level=0 \
        --hwdec=auto-safe \
        --autofit-larger=80%x70% \
        --autofit-smaller=10%x10% \
        --title="${1##*/}" \
        -- "$1"
}

for image in "$@" ; do
    if [ -f "$image" ] || { printf '%s\n' "$image" | urls >/dev/null ; } ; then
        launch "$image"
    else
            >&2 printf 'Error: "%s" does not exist.\n' "$1"
            exit 1
    fi
done
